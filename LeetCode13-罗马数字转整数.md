# LeetCode13-罗马数字转整数

## 题目描述

罗马数字包含以下七种字符: I， V， X， L，C，D 和 M。

字符          数值
I             1
V             5
X             10
L             50
C             100
D             500
M             1000
例如， 罗马数字 2 写做 II ，即为两个并列的 1 。12 写做 XII ，即为 X + II 。 27 写做  XXVII, 即为 XX + V + II 。

通常情况下，罗马数字中小的数字在大的数字的右边。但也存在特例，例如 4 不写做 IIII，而是 IV。数字 1 在数字 5 的左边，所表示的数等于大数 5 减小数 1 得到的数值 4 。同样地，数字 9 表示为 IX。这个特殊的规则只适用于以下六种情况：

I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。
X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。 
C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。
给定一个罗马数字，将其转换成整数。

 

示例 1:

输入: s = "III"
输出: 3
示例 2:

输入: s = "IV"
输出: 4
示例 3:

输入: s = "IX"
输出: 9
示例 4:

输入: s = "LVIII"
输出: 58
解释: L = 50, V= 5, III = 3.
示例 5:

输入: s = "MCMXCIV"
输出: 1994
解释: M = 1000, CM = 900, XC = 90, IV = 4.


提示：

1 <= s.length <= 15
s 仅含字符 ('I', 'V', 'X', 'L', 'C', 'D', 'M')
题目数据保证 s 是一个有效的罗马数字，且表示整数在范围 [1, 3999] 内
题目所给测试用例皆符合罗马数字书写规则，不会出现跨位等情况。
IL 和 IM 这样的例子并不符合题目要求，49 应该写作 XLIX，999 应该写作 CMXCIX 。
关于罗马数字的详尽书写规则，可以参考 罗马数字 - Mathematics 。

## 题解

### 方法一：建立映射关系，观察特殊情况的规律，利用前后字符的大小关系判断数值

（1）方法描述：

①基本思想：

利用哈希表建立每个罗马数字与阿拉伯数字之间的映射关系，然后根据转化规则对字符串中的每个字符进行处理。

②数学规律：

I 可以放在 V (5) 和 X (10) 的左边，来表示 4 和 9。
X 可以放在 L (50) 和 C (100) 的左边，来表示 40 和 90。 
C 可以放在 D (500) 和 M (1000) 的左边，来表示 400 和 900。

IV =4,IX=9------->I表示的1小于右边一位V(表示的5)或X(表示的10)

XL=40,XC=90--->X表示的10小于右边一位L(表示的50)或C(表示的100)

CD=400,CM=900---->C表示的100小于右边一位D(表示的500)或M(表示的1000)

当某一位罗马数字表示的数值大于或等于其后面一位的罗马数字，则表示的整数结果需直接加上该罗马数字代表的数值；

当某一位罗马数字表示的数值小于其后面一位的罗马数字，则表示的整数结果需减去该罗马数字代表的数值。

③字符类型：

普通字符：只占一位

| 罗马数字 | 阿拉伯数字 |
| -------- | ---------- |
| I        | 1          |
| V        | 5          |
| X        | 10         |
| L        | 50         |
| C        | 100        |
| D        | 500        |
| M        | 1000       |

特殊字符：占两位，且前一个字符表示的数字小于后一个字符表示的数字

| 罗马数字=阿拉伯数字 | 罗马数字=阿拉伯数字 |
| ------------------- | ------------------- |
| IV =4               | IX=9                |
| XL=40               | XC=90               |
| CD=400              | CM=900              |

④字符处理：根据数值判断字符应当如何处理

先利用哈希表中的映射关系得到一位罗马数字所表示的数值大小，在与后面一位罗马数字比较大小，判断该字符是否是特殊含义的罗马字符。

⑤整数值的计算：

将罗马数字转化为整数的过程中，需要根据每一位字符所占的权值记性累加。

注：如果当前一位的罗马数字小于其后一位的罗马数字，则其权值需要取相反数。

⑥边界条件：由于罗马数字的长度有限，且需要对每一位罗马数字的下一位做判断，所以循环判断从罗马数字中的第一个字符到最后一个字符，下一位判断从罗马数字中的第一个字符到倒数第二个字符。

（2）具体实现：

```
class Solution {
private:
    unordered_map<char,int> table={
        {'I',1},{'V',5},{'X',10},{'L',50},{'C',100},{'D',500},{'M',1000}
    };//建立哈希映射表，关键字是char类型的罗马字符，键值是int类型的数字
public:
    int romanToInt(string s)
    {
        int number=0;//定义存储转换结果的整型变量
        int length=s.size();//计算罗马数字的长度作为边界条件
        for(int i=0;i<length;i++)//遍历表示罗马数字的字符串
        {
            int value=table[s[i]];//根据哈希表中的映射关系，得到每位罗马字符的数值
            if(i<length-1 && value < table[s[i+1]])//对该位字符与下一位字符的关系进行判断
            {
                number-=value;//当前罗马数字小，则减去该罗马数字表示的数值
            }
            else
            {
                number+=value;//当前罗马数字大，则加上该罗马数字表示的数值
            }
        }
        return number;//返回转换结果
    }
};
```

（3）运行结果：

![image-20220123113845945](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220123113845945.png)

### 算法改进：更换映射方式，减少额外存储空间

（1）方法描述：

①基本思想：用sitch-case语句实现罗马数字与阿拉伯数字之间的映射关系，字符的处理中以后一个字符为中心，比较它与前一个字符的大小关系。

②字符处理：在罗马数字构成的字符串中，从第二个字符到最后一个字符，依次比较每个字符与前一字符的大小关系。

当前字符小于等于前一个字符，则加上前一个罗马字符所表示的数字；

当前字符大于前一字符，则减去前一个罗马字符所表示的数字。

（2）具体实现：

```
class Solution {
private:
    int getValue(char c)//罗马数字与阿拉伯数字之间的映射函数
    {
        switch(c)
        {
            case 'I':
            {
                return 1;
                break;
            }
            case 'V':
            {
                return 5;
                break;
            }
            case 'X':
            {
                return 10;
                break;
            }
            case 'L':
            {
                return 50;
                break;
            }
            case 'C':
            {
                return 100;
                break;
            }
            case 'D':
            {
                return 500;
                break;
            }
            case 'M':
            {
                return 1000;
                break;
            }
            default://除了上述几种情况，其他情况默认为0
            {
                return 0;
                break;
            }
        }
    }
public:
    int romanToInt(string s)
    {
        int number=0;
        int length=s.size();
        int perValue=getValue(s[0]);//保存前一个罗马字符所表示的数字
        for(int i=1;i<length;i++)//遍历除第一个字符以外的其他字符
        {
            int value=getValue(s[i]);//获取当前字符的数值
            if(value > perValue)//当前字符的数值大于前一字符时，减去前一字符的数值
            {
                number-=perValue;
            }
            else//当前字符的数值小于等于前一字符时，加上前一字符的数值
            {
                number+=perValue;
            }
            perValue=value;//更新前一字符的数值
        }
        number+=perValue;//加上最后一个字符的数值
        return number;//返回转化结果
    }
};
```

（3）运行结果：

![image-20220123151630926](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220123151630926.png)

