# LeetCode9-回文数

## 题目

给你一个整数 x ，如果 x 是一个回文整数，返回 true ；否则，返回 false 。

回文数是指正序（从左向右）和倒序（从右向左）读都是一样的整数。例如，121 是回文，而 123 不是。

示例 1：

输入：x = 121
输出：true
示例 2：

输入：x = -121
输出：false
解释：从左向右读, 为 -121 。 从右向左读, 为 121- 。因此它不是一个回文数。
示例 3：

输入：x = 10
输出：false
解释：从右向左读, 为 01 。因此它不是一个回文数。
示例 4：

输入：x = -101
输出：false



## 二、解答

### 1、第一遍自己解题

示例执行正确，提交时提示“解答错误”

原因分析：边界条件考虑不全面

```
class Solution {
public:
    bool isPalindrome(int x) 
    {
        vector<int> value;
        bool flag=false;
        if(x<0)
        {
            return false;
        }
        else
        {
            while(x>=10)
             {
                 int i=x%10;
                 value.push_back(i);
                 x=x/10;
             }
             value.push_back(x);
             int n=value.size();
             for(int j=0;j<n;j++)
             {
                 if(value[j]==value[n-j-1])
                 {
                     flag=true;
                 }
                 else
                     flag=false;
             }
             if(flag==true)
                 return true;
             else
                 return false;
         }
     }
};
```

### 2、参考前人经验

#### 方法一：反转整数后一半，与整数前一半比较

（1）方法描述：

①回文数：数字正着读的结果和反着读的结果一样

②边界处理：

​    负数反转后由于符号的原因，永远不可能是回文数，即回文数是非负数；

​    末位为0的正数反转后首位为0，不符合正数的要求，所以也没有回文数，即末位为0的正数不是回文数。

③反转的数字的位数：偶数位数整数的一半，奇数位数整数的一半加1位

④反转处理：由右向左，逐次得到对应位上的数字

​     对输入的整数值依次进行对10取余（得到最低位上的数字），得到反转后的最高位的值，然后将该整数值除以10，剔除计算过的最低位。重复该过程，直到得到的反转数满足反转结束的条件。

​      通过对10取余，可以得到当前整数值的最低位上的数字；

​      通过除以10，可以位权高于当前位的其他位上的数值，剔除当前整数的最低位。

⑤反转结束的条件：当前整数值小于等于反转后的数值

由于反转得到的数值位数大于等于原数值的剩余位数，所以反转得到的数值应大于等于原整数值逐次除以10后的结果（当前数值）。即当前的数值小于等于反转得到的结果。

![image-20220102160014104](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220102160014104.png)

⑥回文数判断：满足以下条件其中之一即可认为是回文数

奇数位整数：反转的结果的高两位上的数字（除以10的结果）与剩余数值相等

偶数位整数：反转的结果与剩余数值的值相等

⑦反转结果：

反转时由原数值的最低位开始，依次对10取余，然后除以10（向前挪一位）得到，所以反转的结果应与该过程相反。即反转得到的整数值为上一次反转结果的值乘以10（作为高1位），再加上当前数值对10取余的结果（作为最低位）。

（2）具体实现：

```
class Solution {
public:
    bool isPalindrome(int x) 
    {
        int ReversalValue=0;//定义一个整数保存反转结果
        if(x< 0 || (x%10==0 && x!=0))//边界情况判断，负数和最低位为0的正数均无回文数
        {
            return false;
        }
         while(x>ReversalValue)//循环继续进行的条件：当前数值x大于反转结果ReversalValue
         {
             ReversalValue=ReversalValue*10+x%10;//反转后的数值计算为反转处理的逆过程
             x=x/10;
         }
         bool result=((x==ReversalValue) || (x==ReversalValue/10));//回文数判断，偶数位整数的回文数满足x==ReversalValue,奇数位整数的回文数满足x==ReversalValue/10
         return result;
     }
};
```

（3）运行结果

算法分析：

时间复杂度：O(log n)，对于每次迭代，将输入除以 10，因此时间复杂度为 O(log n)。
空间复杂度：O(1)。只需要常数空间存放若干变量。

![image-20220102150042005](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220102150042005.png)



### 方法二：前后对称地按位比较

（1）方法描述：最高位与最低位比较，然后依次向中间靠拢

①边界处理：由于符号的原因，负数没有回文数，所以需要对输入的整数值的正负进行判断。

②计算处理：

高位上的数值：由原数值除以相应的除数

低位上的数值：由原数值对10取余得到

原数值的更新：最高位的数字得到后，对当前除数取余即可得到包含剩余低位的数；最低位的数字得到后，原数值除以10即可得到包含剩余高位的数值。由于比较从两边开始进行，所以每次判断完后，原数值不仅要剔除这一次的最高位，还要剔除这一次的最低位，所以原数值需要先对除数取余，再除以10（顺序不能乱，否则得到的结果为0）。

除数（当前数值的最高位的权值）的更新：由于每次处理的是前后对称的两位上的数字，所以除数在每次比较完成后要除以100。如果除以10，则导致无法得到的低位值无法更新为上一次低位的高一位上的数值。

结束条件：当前数值为正数

第一次比较的除数：当原数值的位数大于2时，将除数乘以10更新，直到原数值为1位数，即为原数值最高位的权值

③回文数判断：按位进行，有两边向中间靠拢。只要由依次前后对称的两位上的数值不相等，则该数不是回文数。

（2）具体实现：

```
class Solution {
public:
    bool isPalindrome(int x) 
    {
       if(x<0)//边界判断，负数没有回文数，直接返回false
       {
           return false;
       }
       int divisor=1;//定义得到高位上的数值的除数，并初始化为1
       while(x/divisor>=10) //计算用于第一次判断除数循环条件：当前数值不是1位数
       {
           divisor=divisor*10;//增大除数
       }
       while(x>0)//判断处理结束的条件：x=0
       {
           int high=x/divisor;//高位数值
           int low=x%10;//低位数值
           if(high!=low)//判断，不相等时，直接返回false
           {
               return false;
           }
           x=(x%divisor)/10;//原数值更新
           divisor=divisor/100;//除数更新
       }
       return true;
    }
};

```

（3）运行结果：

![image-20220102162221635](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\image-20220102162221635.png)
